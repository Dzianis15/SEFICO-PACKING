<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>SEFICO PACKING — Questionnaire commercial (FR)</title>
<style>
  :root{--gap:16px;--radius:12px;--shadow:0 6px 18px rgba(0,0,0,.08)}
  body{font-family:system-ui,Arial,sans-serif;margin:0;background:#f6f7fb;color:#222}
  .wrap{max-width:860px;margin:40px auto;padding:0 16px}
  .card{background:#fff;border-radius:var(--radius);box-shadow:var(--shadow);padding:24px}
  h1{font-size:22px;margin:0 0 10px}
  .sub{color:#555;margin:0 0 16px}
  .q-title{font-size:18px;margin:0 0 8px}
  .opt{display:flex;align-items:flex-start;gap:10px;padding:8px 10px;border:1px solid #e6e7ee;border-radius:10px;margin-bottom:8px;cursor:pointer}
  .opt:hover{background:#fafbff}
  textarea,input[type="text"],input[type="email"],input[type="tel"]{width:100%;padding:10px;border-radius:10px;border:1px solid #e6e7ee}
  .nav{display:flex;gap:10px;justify-content:space-between;margin-top:18px;flex-wrap:wrap}
  button{border:0;padding:12px 16px;border-radius:10px;cursor:pointer;font-weight:700}
  .btn{background:#1a73e8;color:#fff}
  .btn-sec{background:#eef2ff;color:#1a2a3a}
  .summary{margin-top:20px}
  .kv{border:1px solid #eef0f6;border-radius:10px;padding:10px;background:#fafbff;margin:8px 0}
</style>
</head>
<body>
<div class="wrap">
  <div class="card" id="formCard">
    <h1>Questionnaire commercial — SEFICO PACKING</h1>
    <p class="sub">Vos réponses nous aideront à préparer une offre personnalisée. Vous pouvez envoyer les résultats à <b>contact@craft.immo</b>.</p>

    <div id="question"></div>

    <div class="nav">
      <button class="btn-sec" id="prevBtn">← Retour</button>
      <div>
        <button class="btn-sec" id="skipBtn">Passer</button>
        <button class="btn" id="nextBtn">Suivant →</button>
        <button class="btn" id="submitBtn" style="display:none">Terminer ✅</button>
      </div>
    </div>
  </div>

  <div id="result" class="card" style="display:none"></div>
</div>

<script>
const RECIPIENT = "contact@craft.immo";

const SURVEY = [
  {id:"company", type:"text", title:"Société / organisation"},
  {id:"contact", type:"text", title:"Contact"},
  {id:"email",   type:"text", title:"Email"},
  {id:"phone",   type:"text", title:"Téléphone (optionnel)"},

  {id:"thickness", type:"checkbox", title:"Quels types de film utilisez-vous ? (plusieurs choix possibles)",
    options:[{k:"A",t:"45 µm"},{k:"B",t:"60 µm"},{k:"C",t:"70 µm"},{k:"D",t:"90 µm"}]},

  {id:"conditions", type:"checkbox", title:"Quelles conditions d’achats utilisez-vous aujourd’hui ? (plusieurs possibles)",
    options:[{k:"A",t:"Contrats ponctuels / court terme"},{k:"B",t:"Contrats longs"},{k:"C",t:"Ouverts à de nouveaux partenaires"}]},

  {id:"volume", type:"radio", title:"Quel volume vous intéresse ?",
    options:[{k:"A",t:"100–1000 m²"},{k:"B",t:"1000–5000 m²"},{k:"C",t:">= 5000 m²"}]},

  {id:"payment", type:"radio", title:"Quelles conditions pour une coopération longue ?",
    options:[{k:"A",t:"Acompte minimal à la commande, 100% à la réception"},
             {k:"B",t:"100% avant livraison"},
             {k:"C",t:"Autre (précisez en commentaire)"}]},

  {id:"sefico_interest", type:"radio", title:"Les produits SEFICO PACKING vous intéressent-ils ?",
    options:[{k:"A",t:"Oui, je souhaite recevoir des échantillons"},{k:"B",t:"Non, nous avons déjà un fournisseur"}]},

  {id:"priority", type:"checkbox", title:"Critères de choix du fournisseur (plusieurs)",
    options:[{k:"A",t:"Qualité"},{k:"B",t:"Délais d’exécution"},{k:"C",t:"Souplesse de paiement"},{k:"D",t:"Prix"}]},

  {id:"market_quality", type:"checkbox", title:"Qualité sur le marché (1–2 choix)",
    options:[{k:"A",t:"Faible"},{k:"B",t:"Moyenne"},{k:"D",t:"Élevée"}]},

  {id:"market_availability", type:"radio", title:"Offre sur le marché suffisante ?",
    options:[{k:"A",t:"Peu"},{k:"B",t:"Suffisante"}]},

  {id:"market_price", type:"radio", title:"Niveau de prix des sachets ?",
    options:[{k:"A",t:"Abordable"},{k:"B",t:"Moyen"},{k:"C",t:"Élevé"}]},

  {id:"needs", type:"text", title:"Besoins mensuels (texte libre)"},
  {id:"materials", type:"text", title:"Matériaux (PE / PA-PE / PP / compostables / papier+film / autre)"},
  {id:"comments", type:"text", title:"Commentaires (facultatif). Marques, logistique, exigences, etc."}
];

let step = 0;
const answers = {};

const qBox      = document.getElementById('question');
const prevBtn   = document.getElementById('prevBtn');
const nextBtn   = document.getElementById('nextBtn');
const skipBtn   = document.getElementById('skipBtn');
const submitBtn = document.getElementById('submitBtn');
const result    = document.getElementById('result');
const formCard  = document.getElementById('formCard');

function render(){
  if (step < 0) step = 0;
  if (step >= SURVEY.length) step = SURVEY.length - 1;
  result.style.display = 'none';

  const q = SURVEY[step];
  qBox.innerHTML = '';

  const h=document.createElement('h2'); h.className='q-title'; h.textContent=q.title; qBox.appendChild(h);

  if (q.type==='radio' || q.type==='checkbox'){
    q.options.forEach(opt=>{
      const label=document.createElement('label'); label.className='opt';
      const input=document.createElement('input'); input.type=q.type; input.name=q.id+(q.type==='radio'?'':'[]'); input.value=opt.k;
      if (q.type==='radio' && answers[q.id]===opt.k) input.checked=true;
      if (q.type==='checkbox' && Array.isArray(answers[q.id]) && answers[q.id].includes(opt.k)) input.checked=true;
      input.addEventListener('change',()=>{
        if(q.type==='radio'){ answers[q.id]=opt.k; }
        else{
          if(!Array.isArray(answers[q.id])) answers[q.id]=[];
          if(input.checked){ if(!answers[q.id].includes(opt.k)) answers[q.id].push(opt.k); }
          else{ answers[q.id]=answers[q.id].filter(v=>v!==opt.k); }
        }
      });
      label.appendChild(input);
      label.appendChild(document.createTextNode(` ${opt.k}. ${opt.t}`));
      qBox.appendChild(label);
    });
  } else {
    const ta=document.createElement('textarea'); ta.rows=3; ta.value=answers[q.id]||''; ta.placeholder='Votre réponse…';
    ta.addEventListener('input',()=>{answers[q.id]=ta.value;});
    qBox.appendChild(ta);
  }

  prevBtn.style.display = step===0?'none':'inline-block';
  nextBtn.style.display = step<SURVEY.length-1?'inline-block':'none';
  submitBtn.style.display = step===SURVEY.length-1?'inline-block':'none';
  skipBtn.style.display = step<SURVEY.length-1?'inline-block':'none';
}

prevBtn.onclick=()=>{step--;render();};
nextBtn.onclick=()=>{step++;render();};
skipBtn.onclick=()=>{step++;render();};
submitBtn.onclick=()=>showResult();

function showResult(){
  formCard.style.display='none';
  result.style.display='block';

  const toLabel=(q,val)=>{
    if(!q.options) return val||'(vide)';
    const map=Object.fromEntries(q.options.map(o=>[o.k,o.t]));
    if(Array.isArray(val)) return val.map(v=>`${v}. ${map[v]||v}`).join('; ');
    return `${val||''}${val?'. ':''}${val?(map[val]||''):''}`.trim()||'(vide)';
  };

  let html = `<div class="summary"><h2>Merci ! Résultats</h2>`;
  for(const q of SURVEY){ const a=answers[q.id]; html+=`<div class="kv"><b>${q.title}</b><div>${toLabel(q,a)}</div></div>`; }
  html += `
    <div class="nav" style="margin-top:12px">
      <button class="btn-sec" id="backBtn">← Modifier</button>
      <button class="btn" id="sendBtn">Envoyer à contact@craft.immo ✉️</button>
    </div></div>`;
  result.innerHTML=html;

  document.getElementById('backBtn').onclick=()=>{result.style.display='none';formCard.style.display='';render();};
  document.getElementById('sendBtn').onclick=sendMail;
}

function sendMail(){
  const lines=[];
  for(const q of SURVEY){ let v=answers[q.id]; if(Array.isArray(v)) v=v.join(', '); lines.push(`${q.title}: ${v||''}`); }
  const subject=encodeURIComponent('SEFICO PACKING — réponses (FR)');
  const body=encodeURIComponent(lines.join('\n'));
  location.href=`mailto:${encodeURIComponent(RECIPIENT)}?subject=${subject}&body=${body}`;
}

render();
</script>
</body>
</html>
